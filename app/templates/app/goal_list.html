{% extends "app/base.html" %}
{% block body %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Мои цели</h2>
        <a href="{% url 'app:goal_create' %}" class="btn btn-success">Добавить цель</a>
    </div>
    {% if goals %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Название</th>
                <th>Тип</th>
                <th>Цель</th>
                <th>Текущее</th>
                <th>Ед.</th>
                <th>Дедлайн</th>
                <th>Статус</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        {% for goal in goals %}
            <tr>
                <td>{{ goal.name }}</td>
                <td>{{ goal.get_goal_type_display }}</td>
                <td>{{ goal.target_value }}</td>
                <td>{{ goal.current_value }}</td>
                <td>{{ goal.unit }}</td>
                <td>{% if goal.due_date %}{{ goal.due_date|date:"d.m.Y" }}{% else %}—{% endif %}</td>
                <td>{% if goal.is_achieved %}<span class="badge badge-success">Достигнута</span>{% else %}<span class="badge badge-warning">В процессе</span>{% endif %}</td>
                <td><a href="{% url 'app:goal_edit' goal.pk %}" class="btn btn-outline-primary btn-sm">Редактировать</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="alert alert-info">У вас пока нет целей. Добавьте первую!</div>
    {% endif %}
</div>
{% endblock %}
