<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    {% if title %}
        <title>ActivityWatch - {{ title }}</title>
    {% else %}
        <title>ActivityWatch</title>
    {% endif %}
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}" type="image/x-icon"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <style>
        .nav{
            display: inline-block;
            width: 100%;
            padding: 1%;
        }
        .logo-header{
            margin: 0.5vw;
            display: block;
            height: 56px;
            width: auto;
            float: left;
        }
        .nav-btn{
            float: right;
            margin: 0.5vw;
        }
        .fade {
            animation: fadeinout 4s linear 1 forwards;
        }
        @keyframes fadeinout {
            0% { opacity: 0; }
            100% { opacity: 1; }
         }
        .footer{
            width: 100%;
            background-color: #61605c;
            text-align: center;
            height: 140px;
            margin-top: 225px;
            position: relative;
            bottom: 0;
        }
        .logo-footer{
            padding: 30px 0 15px 0;
            height: 100px;
            width: auto;
        }
        .main {
            min-height: 100vh;
        }

        @media screen and (max-width: 910px){
            .nav-btn{
                width: 100%;
            }
            .logo-div {
                display: flex;
                justify-content: center;
                margin-bottom: 0.5vw;
            }
        }
        @media screen and (max-width: 600px) {
            .nav {
                padding: 2% 0;
            }
            .logo-header {
                height: 40px;
                margin: 0 auto 10px auto;
                float: none;
                display: block;
            }
            .logo-div {
                justify-content: center;
                display: flex;
                margin-bottom: 10px;
            }
            .nav-btn {
                float: none;
                display: block;
                width: 95vw;
                margin: 8px auto;
                text-align: center;
            }
            .container {
                min-width: 100vw;
                padding: 0 2vw;
            }
            h1, h2, h3 {
                font-size: 1.2em;
            }
            .footer {
                height: 80px;
                margin-top: 40px;
                padding: 10px 0;
            }
            .logo-footer {
                height: 40px;
                padding: 10px 0 5px 0;
            }
            p, .breadcrumb {
                font-size: 1em;
            }
            /* Универсальные стили для мобильных */
            table {
                display: block;
                width: 100%;
                overflow-x: auto;
                font-size: 0.95em;
            }
            th, td {
                white-space: nowrap;
                padding: 6px 4px;
            }
            form {
                width: 100%;
                padding: 0 2vw;
            }
            input, select, textarea, button {
                width: 100%;
                margin-bottom: 10px;
                font-size: 1em;
            }
            ul, ol {
                padding-left: 18px;
            }
            img, video {
                max-width: 100%;
                height: auto;
            }
            .breadcrumb {
                font-size: 0.95em;
                padding: 4px 2px;
            }
        }
        @media screen and (max-width: 480px) {
            .logo-header {
                height: 32px;
            }
            .footer {
                height: 60px;
            }
            .logo-footer {
                height: 28px;
            }
            h1, h2, h3 {
                font-size: 1em;
            }
        }
        button, .btn {
            min-height: 44px;
            min-width: 44px;
            font-size: 1em;
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
        }
        input, select, textarea, button {
            touch-action: manipulation;
        }
        body, p, h1, h2, h3, h4, h5, h6 {
            word-break: break-word;
            line-height: 1.4;
        }
        @media (max-width: 480px) {
            .nav-btn {
                font-size: 0.95em;
                padding: 8px 0;
                min-width: 90vw;
            }
            .nav {
                overflow-x: auto;
                white-space: nowrap;
            }
            /* Пример скрытия лишних элементов */
            /* .some-desktop-only-class { display: none !important; } */
        }
        .burger {
            display: none;
            position: absolute;
            top: 18px;
            right: 18px;
            width: 38px;
            height: 38px;
            z-index: 1001;
            background: none;
            border: none;
            outline: none;
        }
        .burger span, .burger span:before, .burger span:after {
            display: block;
            position: absolute;
            width: 32px;
            height: 4px;
            background: #333;
            border-radius: 2px;
            transition: 0.3s;
        }
        .burger span {
            top: 17px;
            left: 3px;
        }
        .burger span:before {
            content: '';
            top: -10px;
            left: 0;
        }
        .burger span:after {
            content: '';
            top: 10px;
            left: 0;
        }
        @media (max-width: 700px) {
            .burger { display: block; }
            .nav-btn, .nav > a:not(.logo-div) {
                display: none;
            }
            .nav.open .nav-btn, .nav.open > a:not(.logo-div) {
                display: block;
            }
            .nav {
                position: relative;
            }
        }
        {% block style %}{% endblock %}
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var burger = document.getElementById('burger');
            var nav = document.querySelector('.nav');
            if (burger && nav) {
                burger.addEventListener('click', function() {
                    nav.classList.toggle('open');
                });
            }
        });
    </script>
</head>
<body class="body">
    <div class="main">
        <div class="nav">
            <button class="burger" id="burger" aria-label="Открыть меню"><span></span></button>
            <div class="logo-div">
                <img src="{% static 'logo.png' %}" class="logo-header">
            </div>
            {% with request.resolver_match.url_name as url_name %}
            {% if user.is_authenticated %}
                <a href="{% url 'app:profile' %}" class="nav-btn pt-2" style="text-decoration:none; color:inherit;">
                    {{ user.username }}
                </a>
                <a href={% url 'app:logout' %}>
                    <Button class="btn btn-outline-danger nav-btn">Выйти</Button>
                </a>
                <a href={% url 'app:results' %}>
                    <Button class="btn btn-outline-secondary nav-btn {% if url_name == 'results' %} active {% endif %}" >Результаты</Button>
                </a>
                <a href={% url 'app:foodtracker' %}>
                    <Button class="btn btn-outline-secondary nav-btn {% if url_name == 'foodtracker' %} active {% endif %}">Трекер питания</Button>
                </a>
                <a href={% url 'app:weightlog' %}>
                    <Button class="btn btn-outline-secondary nav-btn {% if url_name == 'weightlog' %} active {% endif %}">Весовой журнал</Button>
                </a>
                <a href={% url 'exlog_home' %}>
                    <Button class="btn btn-outline-secondary nav-btn
                    {%  if url_name == 'exlog_home' or url_name == 'exlog-detail' or url_name == 'exlog-create' or url_name == 'exlog-update' or url_name == 'exlog-delete' or url_name == 'exlog-add-exercise' or url_name == 'exlog-update-exercise'  or url_name == 'exlog-delete-exercise'%}
                        active
                    {% endif %}">Журнал тренировок</Button>
                </a>
                <a href={% url 'app:exercises' %}>
                    <Button class="btn btn-outline-secondary nav-btn {% if url_name == 'exercises' %} active {% endif %}">Упражнения</Button>
                </a>
            {% else %}
                <a href={% url 'app:signup' %}>
                    <Button class="btn btn-outline-secondary nav-btn">Регистрация</Button>
                </a>
                <a href={% url 'app:login' %}>
                    <Button class="btn btn-outline-secondary nav-btn">Войти</Button>
                </a>
            {% endif %}
            {% endwith %}
        <a href={% url 'app:home' %}>
            <Button class="btn btn-outline-secondary nav-btn {% if url_name == 'home' %} active {% endif %}">Главная</Button>
        </a>
    </div>
    <div class="container" style="min-height:600px;">
        {% if breadcrumbs %}
        <nav aria-label="breadcrumb" class="mt-2 mb-3">
            <ol class="breadcrumb bg-white px-3 py-2 rounded shadow-sm">
                {% for crumb in breadcrumbs %}
                    {% if not forloop.last %}
                        <li class="breadcrumb-item"><a href="{{ crumb.url }}">{{ crumb.title }}</a></li>
                    {% else %}
                        <li class="breadcrumb-item active" aria-current="page">{{ crumb.title }}</li>
                    {% endif %}
                {% endfor %}
            </ol>
        </nav>
        {% endif %}
        {% block body %}{% endblock %}
    </div>
    <footer class="footer">
        <a href={% url 'app:home' %}>
            <img src="{% static 'logo2.png' %}" class="logo-footer">
        </a>
        <p style="color: white;"><i> © 2025 Active Life, Inc. Все права защищены.</i></p>
    </footer>
</body>
</html>
